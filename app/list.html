<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes" />
    <meta name="description" content="LXSTS - Simple List Management" />
    <meta name="author" content="" />
    <title>LISTS - List Editor</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <script crossorigin="anonymous" src="js/fa.js"></script>
    <link href="css/fonts.css" rel="stylesheet" type="text/css" />
    <link href="css/styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="lib/jquery-ui/jquery-ui.min.css">
</head>

<body id="page-top">
    <nav class="navbar navbar-expand-sm bg-secondary text-uppercase fixed-top py-0" id="mainNav">
        <div class="container pe-0">
            <a class="navbar-brand" href="/home.html"><span><i class="fas fa-check"></i>HOME</span><span><i
                        class="fas fa-check"></i>LISTS</span></a>
            <button class="navbar-toggler text-uppercase border-0 fw-bold me-1 text-muted" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars fs-5"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto" style="font-size: .85rem;">
                    <li class="nav-item me-1 mx-lg-1"><a class="nav-link px-2 px-lg-2 rounded" href="/all.html"><i
                                class="fas fa-list-check"></i> All Lists</a></li>
                    <li class="nav-item me-1 mx-lg-1"><a class="nav-link px-2 px-lg-2 rounded toggle-theme"
                            href="javascript:;"><i class="fas fa-lightbulb"></i> Theme</a></li>
                    <li class="nav-item me-1 mx-lg-1"><a class="nav-link px-2 px-lg-2 rounded" href="javascript:;"
                            id="signout-btn"><i class="fas fa-right-from-bracket"></i> Signout</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <form name="listNew" id="listNew">
        <header class="masthead bg-secondary text-white text-center sticky-top justify-content-center pb-0">
            <div class="container">
                <div class="row justify-content-center">
                    <div
                        class="col-12 col-sm-4 col-md-4 col-lg-4 text-end my-auto me-0 pe-1 order-sm-1 order-md-1 order-lg-1">
                        <div class="new-buttons d-inline-block btn-group grow-group">
                            <button type="button" class="btn btn-secondary btn-sm fw-lighter grow-btn"
                                style="font-size:.75rem;" data-bs-toggle="modal"
                                data-bs-target="#cancel"><span>cancel</span><i class="fas fa-arrow-left"></i></button>
                            <button type="submit" class="btn btn-secondary btn-sm fw-lighter grow-btn save-sq"
                                style="font-size:.75rem;" id="save-btn"><span>save</span><i
                                    class="fas fa-save"></i></button>
                            <button type="button"
                                class="btn btn-secondary btn-sm fw-lighter grow-btn edit-buttons d-none"
                                style="font-size:.75rem;" data-bs-toggle="modal"
                                data-bs-target="#delete"><span>delete</span><i class="fas fa-trash"></i></button>
                            <button type="button"
                                class="btn btn-secondary btn-sm fw-lighter grow-btn edit-buttons d-none"
                                style="font-size:.75rem;" id="share-btn"><span>share</span><i
                                    class="fas fa-share-nodes"></i></button>
                        </div>
                    </div>
                    <div class="col-12 col-sm-8 col-md-8 col-lg-8 order-sm-0 order-md-0 order-lg-0">
                        <div class="input-group input-group-lg">
                            <input type="text"
                                class="jstitle form-control input-lg px-1 bg-secondary border-0 text-white mt-1"
                                name="title" id="title" value="" placeholder="List Title">
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <section class="page-section fade-out pb-4" id="body-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0">
                        <ul id="sortable" class="list-inline">
                            <!-- Items will be loaded here -->
                        </ul>

                        <input type="hidden" name="l" id="l" value="" />
                        <input class="totalCount" type="hidden" name="total" id="total" value="1" />
                        <input type="hidden" name="newlist" id="newlist" value="1" />

                    </div>
                </div>
            </div>
        </section>

        <div class="bottom-bar text-center text-white fixed-bottom">
            <div class="container px-0" style="background: var(--bs-body-content-bg);">
                <div class="settings-body collapse pt-1" id="collapseSettings">
                    <div class="row py-2" id="list-metadata" style="display:none;">
                        <div class="col-12" style="font-size: .75rem;">
                            <div class="mx-auto bg-secondary rounded p-2 w-75">
                                <div class="d-inline-flex mx-2">
                                    <span class="text-bold me-2">List Created:</span> <span class="text-muted"
                                        id="created-date"></span>
                                </div>
                                <div class="d-inline-flex mx-2">
                                    <span class="text-bold me-2">List Modified:</span> <span class="text-muted"
                                        id="modified-date"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-1">
                        <div class="col-12">
                            <span class="m-2">
                                <input id="sort-view" name="sort-view" type="checkbox" class="css-checkbox"
                                    onchange="sortView();" checked />
                                <label for="sort-view" class="text-white"> Sort</label>
                            </span>
                            <span class="m-2">
                                <input id="checkmark-view" name="checkmark-view" type="checkbox" class="css-checkbox"
                                    onchange="checkboxView();" checked />
                                <label for="checkmark-view" class="text-white"> Checkmark</label>
                            </span>
                            <span class="m-2">
                                <input id="quantity-view" name="quantity-view" type="checkbox" class="css-checkbox"
                                    onchange="quantityView();" />
                                <label for="quantity-view" class="text-white"> Quantity</label>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="input-group border-1 border-top border-primary">
                    <button type="button"
                        class="btn btn-primary btn-block form-control rounded-0 rounded-bottom px-0 add-row" style=""
                        onclick="addRow();"><i class="fas fa-circle-plus"></i> Item</button>
                    <div class="input-group-append">
                        <button type="button" id="settings-btn"
                            class="btn btn-primary btn-block border-0 rounded-0 rounded-bottom px-0"
                            style="border-bottom-left-radius: 0 !important; width: 35px;" data-bs-toggle="collapse"
                            data-bs-target="#collapseSettings" aria-expanded="false" aria-controls="collapseSettings"><i
                                class="fas fa-gear"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <div class="modal fade" id="cancel" tabindex="-1" role="dialog" aria-labelledby="Cancelling..." aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-warning" style="box-shadow: 0 1rem 3rem rgba(0, 0, 0, 1) !important;">
                <div class="modal-header bg-secondary text-white border-0">
                    <h5 class="modal-title" id="confirm-deletion">Confirm Closure</h5>
                </div>
                <div class="modal-body bg-secondary text-white py-0">
                    <span class="dirtyMsg"></span>Are you sure you want to close this list without saving?
                </div>
                <div class="modal-footer bg-secondary border-0">
                    <button type="button" class="btn btn-secondary text-muted border-warning"
                        data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning"
                        onclick="$('form').dirty('setAsClean'); window.location.href = '/home.html'; return false;">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="Deleting..." aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content border-danger" style="box-shadow: 0 1rem 3rem rgba(0, 0, 0, 1) !important;">
                <div class="modal-header bg-secondary text-white border-0">
                    <h5 class="modal-title" id="confirm-closure">Confirm Deletion</h5>
                </div>
                <div class="modal-body bg-secondary text-white py-0">
                    Are you sure you want to delete the list '<span class="list-title"></span>'?
                </div>
                <div class="modal-footer bg-secondary border-0">
                    <button type="button" class="btn btn-secondary text-muted" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="deleteFullList();">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div id="popup-alert" class="popup-alert bg-secondary rounded text-white text-center shadow-lg"
        style="display:none;">
        [alert]
    </div>

    <div id="cover" class="bg-secondary">
        <div class="lds-facebook">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <script src="lib/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="lib/jquery/jquery-1.12.4.min.js"></script>
    <script src="lib/jquery-ui/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.touchpunch.js"></script>
    <script src="js/jquery.dirty.js"></script>
    <script src="js/api.js"></script>
    <script src="js/init.js"></script>
    <script src="js/offline-indicator.js"></script>
    <script>
        console.log('===== INLINE SCRIPT BEFORE LIST-EDITOR.JS =====');
        console.log('jQuery loaded:', typeof $ !== 'undefined');
        console.log('API loaded:', typeof API !== 'undefined');
    </script>
    <script src="js/list-editor.js"></script>
    <script>
        console.log('===== INLINE SCRIPT AFTER LIST-EDITOR.JS =====');

        // Register service worker for offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('[Service Worker] Registered successfully'))
                    .catch(err => console.error('[Service Worker] Registration failed:', err));
            });
        }
    </script>
</body>

</html>